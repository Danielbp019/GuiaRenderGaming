---
import Indice from "../../components/Indice.astro";
import DashboardLayout from "../../layouts/DashboardLayout.astro";
import ImageDiff from "../../components/ImageDiff.astro";
import ImageSolo from "../../components/ImageSolo.astro";
import { indiceItems } from "../../data/indiceItems.ts";

const item = indiceItems.find((i) => i.href === Astro.url.pathname);
const title = item ? item.titleEs : "Error al cargar el nombre de la sección";
---

<DashboardLayout background="bg-ambient">
  <Indice slot="sidebar" />

  <section class="hero h-full">
    <div class="hero-overlay bg-black/50" aria-hidden="true"></div>

    <div class="hero-content w-full p-6 flex flex-col gap-6">
      <!-- Card con título + descripción -->
      <div class="glass rounded-box w-full p-8">
        <nav class="breadcrumbs text-sm" aria-label="Breadcrumbs">
          <ul>
            <li><a href="/"><i class="bi bi-house-fill" aria-hidden="true"></i>Inicio</a></li>
            <li>Tecnologías de uso general</li>
            <li aria-current="page">{title}</li>
          </ul>
        </nav>
        <h1 class="mb-5 text-5xl font-bold">{title}</h1>
        <p>
          Los reflejos son los “espejos” que ves en superficies brillantes dentro del juego: agua, ventanas, charcos,
          metales pulidos. Sirven para que el mundo se vea más realista mostrando lo que hay alrededor en esas
          superficies.
        </p>
      </div>

      <!-- Variantes generales -->
      <div class="glass rounded-box w-full p-6">
        <h2 class="text-2xl font-semibold mb-3">
          <i class="bi bi-palette-fill text-info" aria-hidden="true"></i> Variantes generales
        </h2>
        <ul class="list-disc list-inside space-y-2 text-left">
          <li>
            <strong>Reflejos en pantalla (SSR – Screen Space Reflections):</strong> solo reflejan lo que ya está en pantalla.
            Si un objeto está fuera de cámara, no aparece en el reflejo. Son comunes en agua y suelos brillantes.
          </li>
          <ImageDiff
            title="Comparar: Reflejos en pantalla (SSR) OFF vs Reflejos en pantalla (SSR) ON"
            img1="/img/general/reflections/rise-of-the-tomb-raider-screen-space-reflections-001-off.png"
            img2="/img/general/reflections/rise-of-the-tomb-raider-screen-space-reflections-001-on.png"
            alt1="Escena con Reflejos en pantalla (SSR) OFF"
            alt2="Escena con Reflejos en pantalla (SSR) ON"
          /><br />
          <ImageDiff
            title="Comparar: Reflejos en pantalla (SSR) OFF vs Reflejos en pantalla (SSR) ON"
            img1="/img/general/reflections/rise-of-the-tomb-raider-screen-space-reflections-002-off.png"
            img2="/img/general/reflections/rise-of-the-tomb-raider-screen-space-reflections-002-on.png"
            alt1="Escena con Reflejos en pantalla (SSR) OFF"
            alt2="Escena con Reflejos en pantalla (SSR) ON"
          /><br />
          <li>
            <strong>Reflejos cúbicos (Cube Maps):</strong> usan imágenes pregrabadas del entorno. Son rápidos, pero poco
            precisos: no muestran cambios dinámicos (ejemplo: tu personaje no se refleja).
          </li>
          <ImageSolo
            title="Ver Reflejos cúbicos"
            img="/img/general/reflections/CubeMapExample.jpg"
            alt="Reflejos cúbicos"
          />
          <br />
          <li>
            <strong>Reflejos planos (Planar Reflections):</strong> calculan un “mundo espejo” en superficies planas como
            espejos o agua calma. Muy precisos, pero caros en rendimiento.
          </li>
          <ImageDiff
            title="Comparar: Reflejos en pantalla ON vs Reflejos planos ON"
            img1="/img/general/reflections/01-plan-refl-scene-disabled.png"
            img2="/img/general/reflections/02-plan-refl-scene-enabled.png"
            alt1="Escena con Reflejos en pantalla OFF"
            alt2="Escena con Reflejos planos ON"
          /><br />
          <li>
            <strong>Reflejos por trazado de rayos (Ray-Traced Reflections):</strong> simulan físicamente cómo rebota la luz.
            Son los más realistas (muestran objetos fuera de cámara, luces dinámicas, etc.), pero también los más exigentes.
          </li>
          <ImageDiff
            title="Comparar: Reflejos por trazado de rayos ON vs Reflejos en pantalla (SSR) + Reflejos Globales ON"
            img1="/img/general/reflections/control-ray-traced-reflections-004-on.jpg"
            img2="/img/general/reflections/control-ray-traced-reflections-004-off.jpg"
            alt1="Escena con Reflejos por trazado de rayos ON"
            alt2="Escena con Reflejos en pantalla (SSR) + Reflejos Globales ON"
          />
        </ul>
      </div>

      <!-- Notas de tecnologías propietarias -->
      <div class="glass rounded-box w-full p-6">
        <h2 class="text-2xl font-semibold mb-3">
          <i class="bi bi-journal-bookmark-fill text-secondary"></i> Notas de tecnologías propietarias
        </h2>
        <ul class="list-disc list-inside space-y-2 text-left">
          <li>
            <strong>Reflejos Globales (Global Reflections):</strong> es un sistema de reflejos globales basado en cubemaps
            o probes que complementa al SSR. Piensa en él como un “relleno” de reflejos generales en superficies, que no
            dependen solo de lo que está en pantalla.
          </li>
          <li>
            <strong>NVIDIA RTX:</strong> implementa ray tracing acelerado por hardware para reflejos más rápidos y detallados.
          </li>
          <li>
            <strong>AMD Radeon Rays / FSR 3 + RT:</strong> busca optimizar reflejos con trazado de rayos en sus tarjetas.
          </li>
          <li>
            <strong>Intel XeSS + RT:</strong> también ofrece soporte de reflejos con trazado de rayos, apoyándose en su escalado
            para compensar la pérdida de FPS.
          </li>
        </ul>
      </div>

      <!-- Dos columnas -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full">
        <!-- Coste en rendimiento -->
        <div class="glass rounded-box w-full p-6">
          <h2 class="text-2xl font-semibold mb-3">
            <i class="bi bi-speedometer text-warning"></i> Coste en rendimiento
          </h2>
          <ul class="list-disc list-inside space-y-2 text-left">
            <li>
              <strong>SSR:</strong> impacto medio. Consume GPU, suele costar entre un 5–15% de FPS según la calidad.
            </li>
            <li>
              <strong>Cube Maps:</strong> impacto bajo. Prácticamente gratis en rendimiento, pero visualmente limitados.
            </li>
            <li>
              <strong>Planar Reflections:</strong> impacto medio-alto. Puede costar 10–25% de FPS en escenas con agua o espejos
              grandes.
            </li>
            <li>
              <strong>Ray-Traced Reflections:</strong> impacto muy alto. Dependiendo del juego, puede reducir 20–50% de FPS.
              Requiere GPU moderna con soporte de hardware.
            </li>
            <li><strong>General:</strong> los reflejos dependen casi siempre de la GPU, no de la CPU.</li>
          </ul>
        </div>

        <!-- Cuándo conviene activarlo -->
        <div class="glass rounded-box w-full p-6">
          <h2 class="text-2xl font-semibold mb-3">
            <i class="bi bi-dpad-fill text-success"></i> Cuándo conviene activarlo
          </h2>
          <ul class="list-disc list-inside space-y-2 text-left">
            <li>
              <strong>PC de gama baja/media:</strong> usa SSR en bajo o medio. Reflejos avanzados pueden bajar demasiado
              los FPS.
            </li>
            <li>
              <strong>PC de gama alta sin RT:</strong> activa SSR en alto o planar reflections si el juego lo permite, para
              un buen equilibrio.
            </li>
            <li>
              <strong>PC con GPU moderna (RTX / serie 7000 de AMD / Arc):</strong> prueba Ray-Traced Reflections, pero acompáñalo
              con escalado (DLSS / FSR / XeSS) para mantener FPS jugables.
            </li>
            <li>
              <strong>Competitivo o eSports:</strong> desactiva reflejos o déjalos en bajo; no aportan ventaja y consumen
              recursos.
            </li>
            <li>
              <strong>Experiencia inmersiva / campañas:</strong> súbelos a medio/alto o activa RT si tu hardware lo soporta.
            </li>
          </ul>
        </div>
      </div>
      <!-- Fin Dos columnas -->
    </div>
  </section>
</DashboardLayout>
