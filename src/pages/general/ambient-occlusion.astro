---
import Indice from "../../components/Indice.astro";
import DashboardLayout from "../../layouts/DashboardLayout.astro";
import ImageDiff from "../../components/ImageDiff.astro";
import ImageSolo from "../../components/ImageSolo.astro";
import { indiceItems } from "../../data/indiceItems.ts";

const item = indiceItems.find((i) => i.href === Astro.url.pathname);
const title = item ? item.titleEs : "Error al cargar el nombre de la sección";
---

<DashboardLayout background="bg-ambient">
  <Indice slot="sidebar" />

  <section class="hero h-full">
    <div class="hero-overlay bg-black/50" aria-hidden="true"></div>

    <div class="hero-content w-full p-6 flex flex-col gap-6">
      <!-- Card con título + descripción -->
      <div class="glass rounded-box w-full p-8">
        <nav class="breadcrumbs text-sm" aria-label="Breadcrumbs">
          <ul>
            <li><a href="/"><i class="bi bi-house-fill"></i>Inicio</a></li>
            <li>Tecnologías de uso general</li>
            <li aria-current="page">{title}</li>
          </ul>
        </nav>

        <h1 class="mb-5 text-5xl font-bold">{title}</h1>
        <p>
          La Oclusión ambiental es un efecto gráfico que añade sombras suaves en los rincones, bordes, juntas, bajo
          objetos u otras superficies que están cerca unas de otras, para que la escena se vea más realista. No es una
          sombra puntual, sino que oscurece zonas donde la luz ambiental tendría dificultad de llegar.
        </p>
      </div>

      <!-- Variantes generales -->
      <div class="glass rounded-box w-full p-6">
        <h2 class="text-2xl font-semibold mb-3"><i class="bi bi-palette-fill text-info"></i> Variantes generales</h2>
        <p class="mb-3">Aquí tienes las implementaciones más comunes y en qué se diferencian:</p>
        <ul class="list-disc list-inside space-y-2 text-left">
          <li>
            <strong>SSAO (Screen-Space Ambient Occlusion):</strong> Se basa en lo que está visible en pantalla. Toma el búfer
            de profundidad, mira píxeles cercanos y calcula cuánta geometría bloquea la luz ambiental. Opción básica y de
            menor costo.
          </li>
          <ImageDiff
            title="Comparar: OFF vs SSAO"
            img1="/img/general/ambient-occlusion/control-screen-space-ambient-occlusion-002-off.jpg"
            img2="/img/general/ambient-occlusion/control-screen-space-ambient-occlusion-002-on.jpg"
            alt1="Escena OFF"
            alt2="Escena con SSAO"
          /><br />

          <li>
            <strong>SSAO mejorado / SSAO+:</strong> Más muestras, filtros más suaves, detalles mejorados, menos ruido que
            SSAO básico. Coste mayor.
          </li>
          <ImageDiff
            title="Comparar: OFF vs SSAO+"
            img1="/img/general/ambient-occlusion/AmbientOcclusion-Off.jpg"
            img2="/img/general/ambient-occlusion/AmbientOcclusion-SSAO+.jpg"
            alt1="Escena OFF"
            alt2="Escena con SSAO+"
          /><br />

          <li>
            <strong>HBAO (Horizon-Based Ambient Occlusion):</strong> Explora “horizontes” en el búfer de profundidad, sombreado
            más definido, mejor calidad visual, más costoso.
          </li>
          <ImageDiff
            title="Comparar: SSAO vs HBAO"
            img1="/img/general/ambient-occlusion/SSAO.jpg"
            img2="/img/general/ambient-occlusion/HBAO.jpg"
            alt1="Escena con SSAO"
            alt2="Escena con HBAO"
          /><br />

          <li>
            <strong>HBAO+:</strong> Versión optimizada de NVIDIA. Mejor definición, más muestras, menos artefactos, pero
            más exigente.
          </li>
          <ImageDiff
            title="Comparar: SSAO vs HBAO+"
            img1="/img/general/ambient-occlusion/the-witcher-3-wild-hunt-ambient-occlusion-002-ssao.png"
            img2="/img/general/ambient-occlusion/the-witcher-3-wild-hunt-ambient-occlusion-002-nvidia-hbao-plus.png"
            alt1="Escena con SSAO"
            alt2="Escena con HBAO+"
          /><br />

          <li>
            <strong>HDAO (High Definition Ambient Occlusion):</strong> Variante de AMD, más definición y mejores bordes,
            mayor coste.
          </li>
          <ImageDiff
            title="Comparar: SSAO vs HDAO"
            img1="/img/general/ambient-occlusion/destiny-2-screen-space-ambient-occlusion-002-3d.png"
            img2="/img/general/ambient-occlusion/destiny-2-screen-space-ambient-occlusion-002-hdao.png"
            alt1="Escena con SSAO"
            alt2="Escena con HDAO"
          /><br />

          <li>
            <strong>SSDO (Screen-Space Directional Occlusion):</strong> Añade dirección de luz al cálculo, sombras más realistas,
            coste alto. A pesar de que SSDO genera una iluminación y un sombreado más preciso, continúa siendo propenso a
            los mismos problemas potenciales que presenta SSAO, como por ejemplo los bordes irregulares o sombreados imprecisos
            de un objeto a otro objeto.
          </li>
          <ImageSolo
            title="Ver comparacion de SSDO"
            img="/img/general/ambient-occlusion/SSDO_1.png"
            alt="Comparacion de SSDO"
          />
          <br />
          <li>
            <strong>VXAO (Voxel Ambient Occlusion):</strong> Convierte la escena a vóxeles y calcula la oclusión en ese volumen.
            Muy realista, pero muy costoso.
          </li>
          <ImageDiff
            title="Comparar: HBAO+ vs VXAO"
            img1="/img/general/ambient-occlusion/rise-of-the-tomb-raider-ambient-occlusion-010-hbao-plus.png"
            img2="/img/general/ambient-occlusion/rise-of-the-tomb-raider-ambient-occlusion-010-nvidia-vxao.png"
            alt1="Escena con HBAO+"
            alt2="Escena con VXAO"
          /><br />

          <li>
            <strong>RTAO (Ray-Traced Ambient Occlusion):</strong> Usa trazado de rayos para calcular con precisión cómo la
            luz ambiental es bloqueada por la geometría, generando sombras suaves y realistas en tiempo real. Ofrece la mejor
            calidad visual, pero solo es posible en GPUs modernas con núcleos dedicados a ray tracing e inteligencia artificial.
            Es la opción más exigente en rendimiento.
          </li>
        </ul>
      </div>

      <!-- Dos columnas -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full">
        <!-- Coste en rendimiento -->
        <div class="glass rounded-box w-full p-6">
          <h2 class="text-2xl font-semibold mb-3">
            <i class="bi bi-speedometer text-warning"></i> Coste en rendimiento
          </h2>
          <p class="mb-3">
            El impacto depende de la GPU, resolución, calidad (número de muestras) y variante usada. Estos son los
            puntos clave:
          </p>
          <ul class="list-disc list-inside space-y-2 text-left">
            <li><strong>SSAO básico:</strong> 5–10 % menos FPS.</li>
            <li><strong>SSAO+ / SSAO mejorado:</strong> 10–20 % menos FPS dependiendo del escenario.</li>
            <li>
              <strong>HBAO / HDAO:</strong> 15–30 % menos FPS en ajustes altos; en GPU de rango medio puede sentirse bastante
              pesado.
            </li>
            <li><strong>HBAO+:</strong> Gran calidad, pero muy exigente; puede bajar bastante FPS en 1440p/4K.</li>
            <li>
              <strong>VXAO / volumétricos o ray-trazadas:</strong> Los más costosos, hasta 30–50 % menos FPS dependiendo
              del hardware.
            </li>
            <li>
              <strong>RTAO:</strong> Calidad sobresaliente gracias al trazado de rayos, pero requiere GPUs con núcleos de
              IA y ray tracing. Puede reducir el rendimiento de forma significativa en resoluciones altas de 15 a 40 FPS
              menos.
            </li>
          </ul>
        </div>

        <!-- Cuándo conviene activarlo -->
        <div class="glass rounded-box w-full p-6">
          <h2 class="text-2xl font-semibold mb-3">
            <i class="bi bi-dpad-fill text-success"></i> Cuándo conviene activarlo
          </h2>
          <p class="mb-3">
            La decisión depende de tu GPU y de cuánto priorices la calidad visual frente al rendimiento:
          </p>
          <ul class="list-disc list-inside space-y-2 text-left">
            <li>Con GPU potente: usar SSAO+ o HBAO en calidad media/alta da buen balance.</li>
            <li>Con GPU modesta o en 1440p/4K: mejor calidad baja o desactivar AO para mantener FPS.</li>
            <li>En interiores con muchos detalles: HBAO+ o HDAO pueden valer la pena.</li>
            <li>En exteriores abiertos: AO puede pasar desapercibido, incluso conviene desactivarlo.</li>
            <li>Prueba escalonada: empieza desactivado, luego bajo, medio, hasta donde sea tolerable.</li>
            <li>
              Si tu GPU soporta ray tracing con núcleos de IA: RTAO ofrece la experiencia más realista, ideal para
              quienes priorizan fidelidad visual sobre FPS.
            </li>
          </ul>
        </div>
      </div>
      <!-- Fin Dos columnas -->
    </div>
  </section>
</DashboardLayout>
