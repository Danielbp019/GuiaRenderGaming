---
import Indice from "../../components/Indice.astro";
import DashboardLayout from "../../layouts/DashboardLayout.astro";
import ImageDiff from "../../components/ImageDiff.astro";
import { indiceItems } from "../../data/indiceItems.ts";

import tfTrilinear from "../../assets/img/general/texture-filtering/rise-of-the-tomb-raider-anisotropic-filtering-001-trilinear.png";
import tf4x from "../../assets/img/general/texture-filtering/rise-of-the-tomb-raider-anisotropic-filtering-001-4x.png";
import tf8x from "../../assets/img/general/texture-filtering/rise-of-the-tomb-raider-anisotropic-filtering-001-8x.png";
import tf16x from "../../assets/img/general/texture-filtering/rise-of-the-tomb-raider-anisotropic-filtering-001-16x.png";

const item = indiceItems.find((i) => i.href === Astro.url.pathname);
const title = item ? item.titleEs : "Error al cargar el nombre de la sección";
---

<DashboardLayout background="bg-ambient">
  <Indice slot="sidebar" />

  <section class="hero h-full">
    <div class="hero-overlay bg-black/50" aria-hidden="true"></div>

    <div class="hero-content w-full p-6 flex flex-col gap-6">
      <!-- Card con título + descripción -->
      <div class="glass rounded-box w-full p-8">
        <nav class="breadcrumbs text-sm" aria-label="Breadcrumbs">
          <ul>
            <li><a href="/"><i class="bi bi-house-fill" aria-hidden="true"></i>Inicio</a></li>
            <li>Tecnologías de uso general</li>
            <li aria-current="page">{title}</li>
          </ul>
        </nav>
        <h1 class="mb-5 text-5xl font-bold">{title}</h1>
        <p>
          El filtrado de texturas es la forma en que el juego suaviza y mejora la nitidez de las imágenes (texturas)
          cuando se ven en ángulos lejanos o inclinados. Sin filtrado, las texturas se ven borrosas, pixeladas o con un
          efecto de “escaleras” al alejarse. Con filtrado, se ven más limpias y detalladas.
        </p>
      </div>

      <!-- Variantes generales -->
      <div class="glass rounded-box w-full p-6">
        <h2 class="text-2xl font-semibold mb-3">
          <i class="bi bi-palette-fill text-info" aria-hidden="true"></i> Variantes generales
        </h2>
        <ul class="list-disc list-inside space-y-2 text-left">
          <li>
            <strong>Filtrado puntual (Nearest/Point):</strong> usa el píxel más cercano de la textura. Es rápido, pero genera
            bordes duros y aspecto pixelado.
          </li>
          <li>
            <strong>Bilineal:</strong> suaviza usando los 4 píxeles más cercanos. Mejora la calidad, pero puede verse borroso
            en ángulos.
          </li>
          <li>
            <strong>Trilineal:</strong> añade suavizado entre distintos niveles de detalle (mipmaps). Reduce el “parpadeo”
            al alejarse.
          </li>
          <li>
            <strong>Anisotrópico (AF):</strong> el más avanzado en menús de juegos. Mantiene las texturas nítidas incluso
            en ángulos extremos (ej. suelos en perspectiva). Se puede configurar en niveles (2x, 4x, 8x, 16x).
          </li>
        </ul>
        <br />
        <ImageDiff
          title="Comparar: Trilineal vs Anisotrópico 4x"
          img1={tfTrilinear}
          img2={tf4x}
          alt1="Escena con Trilineal"
          alt2="Escena con Anisotrópico 4x"
        /><br />
        <ImageDiff
          title="Comparar: Anisotrópico 4x vs Anisotrópico 8x"
          img1={tf4x}
          img2={tf8x}
          alt1="Escena con Anisotrópico 4x"
          alt2="Escena con Anisotrópico 8x"
        /><br />
        <ImageDiff
          title="Comparar: Anisotrópico 8x vs Anisotrópico 16x"
          img1={tf8x}
          img2={tf16x}
          alt1="Escena con Anisotrópico 8x"
          alt2="Escena con Anisotrópico 16x"
        />
      </div>

      <!-- Notas de tecnologías propietarias -->
      <div class="glass rounded-box w-full p-6">
        <h2 class="text-2xl font-semibold mb-3">
          <i class="bi bi-journal-bookmark-fill text-secondary" aria-hidden="true"></i> Notas de tecnologías propietarias
        </h2>
        <ul class="list-disc list-inside space-y-2 text-left">
          <li>
            <strong>NVIDIA y AMD:</strong> implementan optimizaciones internas en sus drivers para el filtrado anisotrópico,
            haciéndolo más eficiente que en implementaciones genéricas.
          </li>
          <li>
            <strong>Intel:</strong> también soporta AF, aunque en iGPUs antiguas el rendimiento puede caer más que en NVIDIA/AMD.
          </li>
        </ul>
      </div>

      <!-- Dos columnas -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full">
        <!-- Coste en rendimiento -->
        <div class="glass rounded-box w-full p-6">
          <h2 class="text-2xl font-semibold mb-3">
            <i class="bi bi-speedometer text-warning" aria-hidden="true"></i> Coste en rendimiento
          </h2>
          <ul class="list-disc list-inside space-y-2 text-left">
            <li><strong>Nearest / Bilineal:</strong> impacto casi nulo en FPS.</li>
            <li><strong>Trilineal:</strong> impacto muy bajo, apenas perceptible en GPUs modernas.</li>
            <li>
              <strong>Anisotrópico (AF):</strong>
              <ul class="list-disc list-inside ml-6 space-y-1">
                <li>En 2x o 4x: impacto mínimo.</li>
                <li>En 8x o 16x: puede bajar 1–3 FPS en tarjetas antiguas, pero en GPUs actuales es casi gratis.</li>
              </ul>
            </li>
            <li><strong>Carga principal:</strong> depende de la GPU, no de la CPU.</li>
            <li><strong>Resumen:</strong> hoy en día el coste es muy bajo, salvo en hardware muy antiguo.</li>
          </ul>
        </div>

        <!-- Cuándo conviene activarlo -->
        <div class="glass rounded-box w-full p-6">
          <h2 class="text-2xl font-semibold mb-3">
            <i class="bi bi-dpad-fill text-success" aria-hidden="true"></i> Cuándo conviene activarlo
          </h2>
          <ul class="list-disc list-inside space-y-2 text-left">
            <li>
              <strong>Siempre conviene activarlo:</strong> mejora mucho la nitidez de suelos, paredes y caminos en perspectiva.
            </li>
            <li>
              <strong>Calidad recomendada:</strong>
              <ul class="list-disc list-inside ml-6 space-y-1">
                <li><strong>PC moderno:</strong> Anisotrópico 16x sin miedo.</li>
                <li><strong>Portátiles o hardware débil:</strong> 4x u 8x es un buen equilibrio.</li>
              </ul>
            </li>
            <li>
              <strong>Desactivarlo:</strong> solo tiene sentido si buscas exprimir hasta el último FPS en una GPU muy antigua
              o integrada.
            </li>
            <li>
              <strong>Recomendación general:</strong> para la mayoría de jugadores, déjalo en máximo y olvídate: es de las
              mejoras visuales más “baratas” en coste de rendimiento.
            </li>
          </ul>
        </div>
      </div>
      <!-- Fin Dos columnas -->
    </div>
  </section>
</DashboardLayout>
